version: 1
runtime: nodejs14.19.1
frontend:
  env:
    variables:
      SANITY_PROJECT_ID: 1vz4sc35
      SANITY_DATASET: production
  phases:
    preBuild:
      commands:
        - cd web
        - npm install
    build:
      commands:
        - npm run build
  artifacts:
    baseDirectory: public
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
backend:
  phases:
    commands:
      - cd ../studio
      - npm install
    build:
      commands:
        - npm run build
    post-build:
      commands:
        - npm run deploy
